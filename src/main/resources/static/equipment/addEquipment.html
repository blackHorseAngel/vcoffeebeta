<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新增设备页面</title>
    <link rel="stylesheet" type="text/css" href="/css/pure-min.css"/>
    <script type="text/javascript">
        function insertEquipment() {
            const serialNumber = document.getElementById("serialNumber").value;
            const equipmentName = document.getElementById("equipmentName").value;
            const isUsed = document.getElementById("isUsed").value;
            const companyId = document.getElementById("companyId").value;
            const attendantName = document.getElementById("attendantName").value;
            const attendantTelephoneNumber = document.getElementById("attendantTelephoneNumber").value;
            const params = {
              "serialNumber":serialNumber,
              "equipmentName":equipmentName,
              "isUsed":isUsed,
              "companyId":companyId,
              "attendantName":attendantName,
              "attendantTelephoneNumber":attendantTelephoneNumber
            };
            const url = "/vcoffee/insertEquipment";
            const xhr = new XMLHttpRequest();
            xhr.open("POST",url,true);
            xhr.setRequestHeader("content-Type","application/json");
            xhr.onload = function (e1) {
                let res = JSON.parse(xhr.responseText);
                if(res.code === 1000){
                    alert(res.message);
                }else{
                    alert(res.message);
                    window.location.href = "/error/error.html";
                }
            };
            xhr.onerror = function(e2){
              console.error("新增设备失败：" + JSON.parse(xhr.responseText));
              window.location.href = "/error/error/.html";
            };
            xhr.send(JSON.stringify(params));
        }
        function  back() {
            window.location.href = "/home/home.html";
        }
    </script>
</head>
<body>
    <form class="pure-form pure-form-aligned" method="post">
        <fieldset>
            <div class="pure-controls">
                <legend align="center">新增设备</legend>
            </div>
            <div class="pure-control-group" align="center">
                <label for="serialNumber">设备序列号</label>
                <input type="text" id="serialNumber" name="serialNumber" placeholder="设备序列号"/>
            </div>
            <div class="pure-control-group" align="center">
                <label for="equipmentName">设备名称</label>
                <input type="text" id="equipmentName" name="equipment" placeholder="设备名称"/>
            </div>
            <div class="pure-control-group" align="center">
                <label for="isUsed">是否使用</label>
                <input type="radio" id="isNotUsed" name="isUsed" value="0" checked/>未使用
                <input type="radio" id="isUsed" name="isUsed" value="1" >投入使用
            </div>
            <div class="pure-control-group" align="center">
                <label for="companyId">所属公司</label>
                <select id="companyId"  name="companyId" size="10" autofocus>
                    <option value="1">aaa</option>
                    <option value="2">bbb</option>
                </select>
            </div>
            <div class="pure-control-group" align="center">
                <label for="attendantName">维护人姓名</label>
                <input type="text" id="attendantName" name="attendantName" placeholder="维护人姓名"/>
            </div>
            <div class="pure-control-group" align="center">
                <label for="attendantTelephoneNumber">维护人联系方式</label>
                <input type="text" id="attendantTelephoneNumber" name="attendantTelephoneNumber" placeholder="维护人联系方式"/>
            </div>
            <div class="pure-control-group" align="center">
                <button type="button" class="pure-button pure-button-primary" onclick="insertEquipment()"/>
                <button type="reset" class="pure-button pure-button-primary">取消</button>
                <button type="button" class="pure-button pure-button-primary" onclick="back()">返回</button>
            </div>
        </fieldset>
    </form>
</body>
</html>