<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册页面</title>
    <link rel="stylesheet" type="text/css" href="/css/pure-min.css">
    <script type="text/javascript">
        function  registry() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const confirmPassword = document.getElementById("confirmPassword").value;
            const telephoneNumber = document.getElementById("telephoneNumber").value;
            const email = document.getElementById("email").value;
            const  params = {
                "username":username,
                "password":password,
                "confirmPassword":confirmPassword,
                "telephoneNumber":telephoneNumber,
                "email":email
            };
            const url = "/vcoffee/register";
            const xhr = new XMLHttpRequest();
            xhr.open("POST",url,true);
            xhr.setRequestHeader("content-Type","application/json");
            xhr.onload = function (e) {
                let res = JSON.parse(xhr.responseText);
                if(xhr.readyState === 4 && xhr.status === 200){
                    if(res.code === 1003){
                        alert(res.message);
                    }else if(res.code === 1006){
                        alert(res.message);
                    }else if(res.code === 1004){
                        alert(res.message);
                    }else if(res.code === 1005){
                        alert(res.message);
                    }else if(res.code === 1000){
                        alert(res.message);
                        window.location.href = "/login/login.html";
                    }else{
                        alert(res.message);
                        window.location.href = "/error/error.html";
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error("注册失败");
                window.location.href = "/error/error.html";
            };
            xhr.send(JSON.stringify(params));
        }
    </script>
</head>
<body background="/picture/coffee.jpg" style="background-repeat: no-repeat;background-size: 100% 100%;background-attachment: fixed;">
<form class="pure-form pure-form-aligned" method="post">
    <fieldset>
        <div class="pure-controls">
            <legend align="center">用户注册</legend>
        </div>
        <div class="pure-control-group" align="center">
            <label for="username">用户姓名</label>
            <input type="text" id="username" name="username" placeholder="用户姓名" min="2" max="50" required=""/>
        </div>
        <div class="pure-control-group" align="center">
            <label for="password">用户密码</label>
            <input type="password" id="password" name="password" placeholder="用户密码" min="6" max="20" required="" autocomplete="off"/>
        </div>
        <div class="pure-control-group" align="center">
            <label for="confirmPassword">确认密码</label>
            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="确认密码" min="6" max="20" required="" autocomplete="off"/>
        </div>
        <div class="pure-control-group" align="center">
            <label for="telephoneNumber">联系方式</label>
            <input type="text" id="telephoneNumber" name="telephoneNumber" placeholder="联系方式" minlength="11" maxlength="18"  required=""  autocomplete="off"/>
        </div>
        <div class="pure-control-group" align="center">
            <label for="email">电子邮箱</label>
            <input type="text" id="email" name="email" placeholder="电子邮件" required="" />
        </div>
        <div class="pure-controls" align="center">
            <button type="button" class="pure-button pure-button-primary" onclick="registry()">注册</button>
            <button type="reset" class="pure-button pure-button-primary">取消</button>
        </div>
    </fieldset>
</form>
</body>
</html>