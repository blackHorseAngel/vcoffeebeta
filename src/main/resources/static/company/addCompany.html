<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新增公司页面</title>
    <link rel="stylesheet" type="text/css" href="/css/pure-min.css"/>
    <script type="text/javascript">
        /**
         * 点击新增按钮，新增公司信息
         */
        function insertCompany() {
            const companyName = document.getElementById("companyName").value;
            const companyNickName = document.getElementById("companyNickName").value;
            const companyPhoneNumber = document.getElementById("companyPhoneNumber").value;
            const companyAddress = document.getElementById("companyAddress").value;
            const params ={
                "companyName":companyName,
                "companyNickName":companyNickName,
                "companyPhoneNumber":companyPhoneNumber,
                "companyAddress":companyAddress
            };
            const url = "/vcoffee/company/insertCompany";
            const xhr = new XMLHttpRequest();
            xhr.open("POST",url,true);
            xhr.setRequestHeader("content-Type","application/json");
            xhr.onload = function (e1) {
                let res = JSON.parse(xhr.responseText);
                if(res.code === 1000){
                    console.log(res.message);
                    window.location.href = "/company/queryCompany.html";
                }else if(res.code === 1008){
                    console.log(res.message);
                }else  if(res.code === 1009){
                    console.log(res.message);
                }else if(res.code === 1010){
                    console.log(res.message);
                    window.location.href = "/error/error.html";
                }
            };
            xhr.onerror = function (e2) {
                console.error("新增公司失败："+JSON.parse(xhr.responseText));
                window.location.href = "/error/error.html";
            };
            xhr.send(JSON.stringify(params));
        }

        /**
         * 返回主页面
         */
        function back() {
            window.location.href = "/home/home.html";
        }
    </script>
</head>
<body background="/picture/welcome1.jpg" style="background-repeat: no-repeat;background-size: 100% 100%;background-attachment: fixed;">
 <form class="pure-form pure-form-aligned" method="post">
     <fieldset>
         <div class="pure-controls">
             <legend align="center">新增公司</legend>
         </div>
         <div class="pure-control-group" align="center">
             <label for="companyName">公司名称</label>
             <input type="text" id="companyName" name="companyName" size="32" placeholder="公司名称"/>
         </div>
         <div class="pure-control-group" align="center">
             <label for="companyNickName">公司简称</label>
             <input type="text" id="companyNickName" name="companyNickName" size="20" placeholder="公司简称"/>
         </div>
         <div class="pure-control-group" align="center">
             <label for="companyPhoneNumber">公司电话</label>
             <input type="number" id="companyPhoneNumber" name="companyPhoneNumber" size="11" placeholder="公司电话"/>
         </div>
         <div class="pure-control-group" align="center">
             <label for="companyAddress">公司地址</label>
             <input type="text" id="companyAddress" name="companyAddress" placeholder="公司地址"/>
         </div>
         <div class="pure-controls" align="center">
             <button type="button" class="pure-button pure-button-primary" onclick="insertCompany()">新增</button>
             <button type="reset" class="pure-button pure-button-primary">取消</button>
             <button type="button" class="pure-button pure-button-primary" onclick="back()">返回</button>
         </div>
     </fieldset>
 </form>
</body>
</html>